
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;python&quot;,&quot;java&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="java">java</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#bboxx-rest-api" class="toc-h1 toc-link" data-title="bboxx-rest-api">BBOXX REST API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction" class="toc-h2 toc-link" data-title="introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#get-customer-details" class="toc-h2 toc-link" data-title="get-customer-details">[GET] Customer Details</a>
                  </li>
                  <li>
                    <a href="#post-add-customer-phone-number" class="toc-h2 toc-link" data-title="post-add-customer-phone-number">[POST] Add Customer Phone Number</a>
                  </li>
                  <li>
                    <a href="#delete-remove-customer-phone-number" class="toc-h2 toc-link" data-title="delete-remove-customer-phone-number">[DELETE] Remove Customer Phone Number</a>
                  </li>
                  <li>
                    <a href="#post-payment" class="toc-h2 toc-link" data-title="post-payment">[POST] Payment</a>
                  </li>
                  <li>
                    <a href="#get-payment" class="toc-h2 toc-link" data-title="get-payment">[GET] Payment</a>
                  </li>
                  <li>
                    <a href="#errors-code" class="toc-h2 toc-link" data-title="errors-code">Errors code</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#bboxx-soap-api" class="toc-h1 toc-link" data-title="bboxx-soap-api">BBOXX SOAP API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#introduction-2" class="toc-h2 toc-link" data-title="introduction">Introduction</a>
                  </li>
                  <li>
                    <a href="#authentication-2" class="toc-h2 toc-link" data-title="authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#request" class="toc-h2 toc-link" data-title="request">Request</a>
                  </li>
                  <li>
                    <a href="#errors-code-2" class="toc-h2 toc-link" data-title="errors-code">Errors code</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://github.com/lord/slate'>Sign Up for a Developer Key</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='bboxx-rest-api'>BBOXX REST API</h1><h2 id='introduction'>Introduction</h2>
<p>The BBOXX Pulse API allows developers to integrate third-party applications with BBOXX. This documentation provides the technical information about integrating and configuring a payment system to send payment information to BBOXX. Companies can use this API to allow real-time mobile money transactions to be processed in Pulse.</p>

<p><a href="pdf/BBOXX%20Mobile%20Money%20Payment%20Process%20Flowchart.pdf">Click Here</a> for more information about the BBOXX&#39;s Mobile Money process.</p>
<h2 id='authentication'>Authentication</h2><pre class="highlight python tab-python"><code><span class="c"># How to Generate the "Authorization" header in Python</span>

<span class="kn">import</span> <span class="nn">hmac</span>
<span class="kn">from</span> <span class="nn">hashlib</span> <span class="kn">import</span> <span class="n">sha1</span>

<span class="k">def</span> <span class="nf">generate_signature</span><span class="p">(</span><span class="n">shared_secret</span><span class="p">,</span> <span class="n">payload</span><span class="p">):</span>
    <span class="n">raw_signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">shared_secret</span><span class="p">,</span> <span class="n">payload</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">'UTF-8'</span><span class="p">),</span> <span class="n">sha1</span><span class="p">)</span>
    <span class="n">signature</span> <span class="o">=</span> <span class="n">raw_signature</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">"base64"</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s">'</span><span class="se">\n</span><span class="s">'</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">signature</span>

<span class="c"># Example Request Data</span>
<span class="n">customerId</span>  <span class="o">=</span> <span class="s">"123"</span><span class="p">;</span>
<span class="n">body</span>        <span class="o">=</span> <span class="s">"{</span><span class="se">\"</span><span class="s">name</span><span class="se">\"</span><span class="s">:</span><span class="se">\"</span><span class="s">Bob</span><span class="se">\"</span><span class="s">,</span><span class="se">\"</span><span class="s">amount</span><span class="se">\"</span><span class="s">:32}"</span>
<span class="n">messageId</span>   <span class="o">=</span> <span class="s">"a2536ff7-886a-432d-a5ae-45ed9d12b016"</span>
<span class="n">providerId</span>  <span class="o">=</span> <span class="s">"12345"</span>

<span class="c"># Payload must be contructed in this order</span>
<span class="n">payload</span> <span class="o">=</span> <span class="n">body</span> <span class="o">+</span> <span class="n">messageId</span> <span class="o">+</span> <span class="n">providerId</span> <span class="o">+</span> <span class="n">customerId</span>

<span class="c"># Generate Signature</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="s">"supersecurekey"</span><span class="p">,</span><span class="n">payload</span><span class="p">)</span>
<span class="c"># Construct Authorization Header</span>
<span class="n">authHeader</span> <span class="o">=</span> <span class="s">"Authorization: "</span> <span class="o">+</span> <span class="n">customerId</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">signature</span><span class="p">;</span>

<span class="k">print</span><span class="p">(</span><span class="n">authHeader</span><span class="p">)</span>

</code></pre><pre class="highlight java tab-java"><code><span class="c1">// How to Generate the "Authorization" header in Java</span>

<span class="kn">import</span> <span class="nn">java.nio.charset.Charset</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.NoSuchAlgorithmException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.InvalidKeyException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.codec.binary.Base64</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GenerateSignature</span><span class="o">{</span>

    <span class="kd">protected</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateSignature</span><span class="o">(</span><span class="n">String</span> <span class="n">sharedSecret</span><span class="o">,</span> <span class="n">String</span> <span class="n">payload</span><span class="o">){</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">raw_signature</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="n">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"HmacSHA1"</span><span class="o">);</span>
            <span class="n">SecretKeySpec</span> <span class="n">secret</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecretKeySpec</span><span class="o">(</span><span class="n">sharedSecret</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="n">Charset</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">)),</span>
            <span class="s">"HmacSHA1"</span><span class="o">);</span>
            <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">secret</span><span class="o">);</span>
            <span class="n">raw_signature</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">payload</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="n">Charset</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">)));</span>
        <span class="o">}</span> <span class="k">catch</span><span class="o">(</span> <span class="n">NoSuchAlgorithmException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InvalidKeyException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Response: "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="k">return</span> <span class="n">Base64</span><span class="o">.</span><span class="na">encodeBase64String</span><span class="o">(</span><span class="n">raw_signature</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>
        <span class="n">String</span> <span class="n">payload</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

        <span class="c1">// Example Request Data</span>
        <span class="n">String</span> <span class="n">body</span> <span class="o">=</span> <span class="s">"{\"name\":\"Bob\",\"amount\":32}"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">messageId</span> <span class="o">=</span> <span class="s">"a2536ff7-886a-432d-a5ae-45ed9d12b016"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">providerId</span> <span class="o">=</span> <span class="s">"12345"</span><span class="o">;</span>
        <span class="n">String</span> <span class="n">customerId</span> <span class="o">=</span> <span class="s">"123"</span><span class="o">;</span>

        <span class="c1">// Payload must be contructed in this order</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="n">body</span> <span class="o">+</span> <span class="n">messageId</span> <span class="o">+</span> <span class="n">providerId</span> <span class="o">+</span> <span class="n">customerId</span><span class="o">;</span>

        <span class="n">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">generateSignature</span><span class="o">(</span><span class="s">"supersecurekey"</span><span class="o">,</span><span class="n">payload</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">authHeader</span> <span class="o">=</span> <span class="s">"Authorization: "</span> <span class="o">+</span> <span class="n">customerId</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span> <span class="n">signature</span><span class="o">;</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">authHeader</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c">#  How to Generate the "Authorization" header in BASH</span>

<span class="nv">body</span><span class="o">=</span><span class="s2">"{</span><span class="se">\"</span><span class="s2">name</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Bob</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">amount</span><span class="se">\"</span><span class="s2">:32}"</span>
<span class="nv">messageId</span><span class="o">=</span><span class="s2">"a2536ff7-886a-432d-a5ae-45ed9d12b016"</span>
<span class="nv">providerId</span><span class="o">=</span><span class="s2">"12345"</span>
<span class="nv">customerId</span><span class="o">=</span><span class="s2">"123"</span>

<span class="k">function </span>generate_signature <span class="o">{</span>
  <span class="nv">sharedSecret</span><span class="o">=</span><span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
  <span class="nv">payload</span><span class="o">=</span><span class="s2">"</span><span class="nv">$2</span><span class="s2">"</span>
  <span class="nb">echo</span> -n <span class="s2">"</span><span class="nv">$payload</span><span class="s2">"</span> | openssl dgst -binary -sha1 -hmac <span class="s2">"</span><span class="nv">$sharedSecret</span><span class="s2">"</span> | openssl base64
<span class="o">}</span>

<span class="nv">signature</span><span class="o">=</span><span class="sb">`</span>generate_signature supersecurekey <span class="nv">$body$messageId$providerId$customerId</span><span class="sb">`</span>
<span class="nv">authHeader</span><span class="o">=</span><span class="s2">"Authorization: </span><span class="nv">$customerId</span><span class="s2">:</span><span class="nv">$signature</span><span class="s2">"</span>
<span class="nb">echo</span> <span class="nv">$authHeader</span>
</code></pre>
<p>Authentication is achieved by signing every HTTP request made to BBOXX.</p>

<p>The HTTP header “Authorization” is be used to transport the signature this security. The “Authorization” header consists of a <code>customerId</code> and the <code>signature</code> seperated by a colon <code>:</code> example: <code>Authorization: &lt;customerId&gt;:&lt;signature&gt;</code></p>

<p>The <code>customerId</code> is a unqiue identifier that represents the customer who made the payment.</p>

<p>The <code>signature</code> is generated using the HMAC-SHA1 hashing mechanism.</p>

<p>Steps to create the <code>Authorization</code> header:</p>

<ol>
<li>First, combine the following 4 fields into one large <code>payload</code> (<em>NOTE</em> The order is important):

<ul>
<li>The Request body</li>
<li>The <code>messageID</code> field</li>
<li>The <code>providerId</code> field</li>
<li>The <code>customerId</code> field</li>
</ul></li>
<li>Then make sure the <code>payload</code> is in &quot;UTF-8&quot; format.</li>
<li>Then create the <code>raw_signature</code> by applying the HMAC SHA1 algorithm to the <code>payload</code></li>
<li>Then create the <code>signature</code> by Base64 encoding the <code>raw_signature</code></li>
<li>Then create the “Authorization” header by combining the <code>customerId</code> and the <code>signature</code> seperated by a colon <code>:</code></li>
</ol>
<h2 id='get-customer-details'>[GET] Customer Details</h2><h3 id='description'>Description</h3>
<p>Retrieve customer payment information.</p>

<p>The GET request will be sent to the following URL:
https://payments-test.bboxx.co.uk/pulseapi/mm/v2/providers/{provider_id}/customers/{customer_id}</p>
<h3 id='headers'>Headers</h3><pre class="highlight plaintext"><code>Content-Type:application/json
Authorization:12345:XXXXXXXXXXXX=
MessageID:XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>If a request payload is sent, it should always be a JSON string</td>
</tr>
<tr>
<td>Authorization</td>
<td>The customerId combined with the signature. (See Authentication section)</td>
</tr>
<tr>
<td>MessageID</td>
<td>A globaly unique identifier for every request. Generate using UUID4 to ensure uniqueness</td>
</tr>
</tbody></table>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Fields</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>provider_id</td>
<td>The Mobile Operator provider ID that initiated the request. This is the same for all requests.</td>
</tr>
<tr>
<td>customer_id</td>
<td>A unqiue identifier that represents the customer who made the payment.</td>
</tr>
</tbody></table>
<h3 id='request-payload'>Request Payload</h3>
<p>Refer to Authentication above for description of header</p>
<pre class="highlight python tab-python"><code>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://payments-test.bboxx.co.uk/pulseapi/mm/v2/providers/{provider_id}/customers/{customer_id}'</span>

<span class="n">header</span> <span class="o">=</span><span class="p">{</span><span class="s">'Content-Type'</span><span class="p">:</span><span class="s">'application/json'</span>
        <span class="s">'Authorization'</span><span class="p">:</span><span class="s">'12000:fq/LZ0n8YxOp0tC3NLaj6GbPFE8='</span><span class="p">,</span>
        <span class="s">'MessageID'</span><span class="p">:</span><span class="s">'74e46dafsf-8bbadafdsfdsffdb4c'</span><span class="p">,</span>
        <span class="s">'Authorization'</span><span class="p">:</span><span class="s">'{{Authorization}}'</span><span class="p">}</span>


<span class="n">post</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span> <span class="n">header</span><span class="p">)</span>

</code></pre><h3 id='response-payload'>Response Payload</h3>
<p>Upon the successful processing of the GET request, a JSON encoded response will be return in the following format:</p>
<pre class="highlight plaintext"><code>{
    "minimum_payment": null,
    "down_payment": null,
    "last_payments": [
        {
            "amount": 2100,
            "reference": "AE34252UV",
            "timestamp": "2018-05-15T09:20:35Z"
        },
        {
            "amount": 5680,
            "reference": "ADFST5342",
            "timestamp": "2018-04-13T13:40:38Z"
        }
    ],
    "package": "BBOXX Standard Kit"
    "daily_rate": null,
    "full_name": "BOB SMITH",
    "expire_date": null,
    "phone_numbers": [
        {
            "phone_number": "0765345678"
        },
        {
            "phone_number": "0734646334"
        }
    ]
}


</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>minimum_payment <br><font color="DarkGray"><em>int</em></font><br></td>
<td>Amount required for switch on (NULL if customer has no equipment installed)</td>
</tr>
<tr>
<td>down_payment <br><font color="DarkGray"><em>int</em></font><br></td>
<td>Amount required to allow installation</td>
</tr>
<tr>
<td>last_payments <br><font color="DarkGray"><em>JSON Object</em></font><br></td>
<td>List of Customers last 3 payments, including currency, ammount, reference and timestamp</td>
</tr>
<tr>
<td>package <br><font color ="DarkGray"><em>String</em></font><br></td>
<td>The package installed (currently hardcoded as &quot;BBOXX Standard Kit&quot;)</td>
</tr>
<tr>
<td>daily_rate <br><font color="DarkGray"><em>double</em></font><br></td>
<td>Cost of single day of energy</td>
</tr>
<tr>
<td>full_name <br><font color="DarkGray"><em>String</em></font><br></td>
<td>Customers full name</td>
</tr>
<tr>
<td>expire_date <br><font color="DarkGray"><em>String</em></font><br></td>
<td>Date equipment will shut down if no further payments made</td>
</tr>
<tr>
<td>phone_numbers <br><font color="DarkGray"><em>int</em></font><br></td>
<td>List of customer phone numbers including prefered_phone option</td>
</tr>
</tbody></table>
<h2 id='post-add-customer-phone-number'>[POST] Add Customer Phone Number</h2><h3 id='description-2'>Description</h3>
<p>Add phone number to customer account.</p>

<p>The POST request will be sent to the following URL:
https://payments-test.bboxx.co.uk/pulseapi/mm/v2/providers/{provider_id}/customers/{customer_id}/phones/{phone_number}</p>
<h3 id='headers-2'>Headers</h3><pre class="highlight plaintext"><code>Content-Type:application/json
Authorization:12345:XXXXXXXXXXXX=
MessageID:XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>If a request payload is sent, it should always be a JSON string</td>
</tr>
<tr>
<td>Authorization</td>
<td>The customerId combined with the signature. (See Authentication section)</td>
</tr>
<tr>
<td>MessageID</td>
<td>A globaly unique identifier for every request. Generate using UUID4 to ensure uniqueness</td>
</tr>
</tbody></table>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Fields</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>provider_id</td>
<td>The Mobile Operator provider ID that initiated the request. This is the same for all requests.</td>
</tr>
<tr>
<td>customer_id</td>
<td>A unqiue identifier that represents the customer who made the payment.</td>
</tr>
<tr>
<td>phone_number</td>
<td>The phone number that you would like to add to the customers account (excluding country code).</td>
</tr>
</tbody></table>
<h3 id='response-payload-2'>Response Payload</h3>
<p>Upon the successful processing of the POST request, a JSON encoded response will be return in the following format:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>result <br><font color="DarkGray"><em>String</em></font><br></td>
<td>Message confirming process complete</td>
</tr>
<tr>
<td>error <br><font color="DarkGray"><em>JSON Object</em></font><br></td>
<td>Error message object, including description, error_code and status_code</td>
</tr>
</tbody></table>
<h2 id='delete-remove-customer-phone-number'>[DELETE] Remove Customer Phone Number</h2><h3 id='description-3'>Description</h3>
<p>Remove phone numbers from customer account</p>

<p>The DELETE request will be sent to the following URL:
https://payments-test.bboxx.co.uk/pulseapi/mm/v2/providers/{provider_id}/customers/{customer_id)/phones/{phone_number}</p>
<h3 id='headers-3'>Headers</h3><pre class="highlight plaintext"><code>Content-Type:application/json
Authorization:12345:XXXXXXXXXXXX=
MessageID:XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
MessageTimestamp:yyyyMMddHHmmss
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>If a request payload is sent, it should always be a JSON string</td>
</tr>
<tr>
<td>Authorization</td>
<td>The customerId combined with the signature. (See Authentication section)</td>
</tr>
<tr>
<td>MessageID</td>
<td>A globaly unique identifier for every request. Generate using UUID4 to ensure uniqueness</td>
</tr>
<tr>
<td>MessageTimestamp</td>
<td>The timestamp of the payment in UTC timezone with the yyyyMMddHHmmss format</td>
</tr>
</tbody></table>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>providerId</td>
<td>The Mobile Operator provider ID that initiated the request. This is the same for all requests.</td>
</tr>
<tr>
<td>customerId</td>
<td>A unqiue identifier that represents the customer who made the payment. Depending on the provider this can be an account number, email address, internal identifier</td>
</tr>
<tr>
<td>phone_number</td>
<td>The phone number that you would like to remove from the customers account (excluding country code).</td>
</tr>
</tbody></table>
<h3 id='response-payload-3'>Response Payload</h3>
<p>Upon the successful processing of the DELETE request, a JSON encoded response will be return in the following format:</p>
<pre class="highlight plaintext"><code>
 {"result": "PHONE_NUMBER_REMOVED"}

 or
 {
  "error": {
    "description": "Unable to find a customer with the given cuustomer_id.",
    "error_code": "CUSTOMER_NOT_FOUND",
    "status_code": 404
   }
 }


</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>result <br><font color="DarkGray"><em>String</em></font><br></td>
<td>Message confirming process complete</td>
</tr>
<tr>
<td>error <br><font color="DarkGray"><em>JSON Object</em></font><br></td>
<td>Error message object, including description, error_code and status_code</td>
</tr>
</tbody></table>
<h2 id='post-payment'>[POST] Payment</h2><h3 id='description-4'>Description</h3>
<p>This endpoint allows for a payment to be created.</p>

<p>The POST request will be sent to the following URL:</p>
<h4 id='version-1'>Version 1</h4>
<p>https://payments-test.bboxx.co.uk/pulseapi/mm/1.0/payments/payment/{providerId}/customers/{customerId}/payments</p>
<h4 id='version-2'>Version 2</h4>
<p>https://payments-test.bboxx.co.uk/pulseapi/mm/v2/providers/{providerId}/customers/{customerId}/payments</p>
<h3 id='headers-4'>Headers</h3><pre class="highlight plaintext"><code>Content-Type:application/json
Authorization:12345:XXXXXXXXXXXX=
MessageID:XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
MessageTimestamp:yyyyMMddHHmmss
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>If a request payload is sent, it should always be a JSON string</td>
</tr>
<tr>
<td>Authorization</td>
<td>The customerId combined with the signature. (See Authentication section)</td>
</tr>
<tr>
<td>MessageID</td>
<td>A globaly unique identifier for every request. Generate using UUID4 to ensure uniqueness</td>
</tr>
<tr>
<td>MessageTimestamp</td>
<td>The timestamp of the payment in UTC timezone with the yyyyMMddHHmmss format</td>
</tr>
</tbody></table>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>providerId</td>
<td>The Mobile Operator provider ID that initiated the request. This is the same for all requests.</td>
</tr>
<tr>
<td>customerId</td>
<td>A unqiue identifier that represents the customer who made the payment. Depending on the provider this can be an account number, email address, internal identifier</td>
</tr>
</tbody></table>
<h3 id='request-payload-2'>Request Payload</h3>
<p>Following table provides information of each JSON field of the HTTP request body:</p>
<pre class="highlight shell tab-shell"><code>
curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-Type: application/json"</span>
 -H <span class="s2">"Authorization:243858606953:9HkobKxzuAiK4j9bHbi80HDMG+Y="</span> -H <span class="s2">"SMSSupport:Y"</span>
 -H <span class="s2">"MessageID:74e46da-41ff-8bba-f529-930acbffdb4c"</span>, -H <span class="s2">"MessageTimestamp:20161029113022"</span>
 -X GET -d <span class="s1">'{"transactionId" : "123647","reference" : "bill-0001","operator" : "Mobile_provider","subscriber" : "243858606953","countryCode" : "CD","transaction_type": "PayBill","first_name": "Jhon","account_number":"45678","last_name":  "Doe","amountTargetValue":  78.79,"amountTargetCurrency":  "GBP","exchangeRate":  1.38,"currency" : "USD","amount" : 100.00 }'</span>
https://payments-test.bboxx.co.uk/pulseapi/mm/1.0/payments/payment/343755867/customers/243858606953/payments


</code></pre><pre class="highlight python tab-python"><code>

<span class="n">url</span> <span class="o">=</span> <span class="s">'https://payments-test.bboxx.co.uk/pulseapi/mm/1.0/payments/payment/200/customers/12000/payments'</span>

<span class="n">Headers</span> <span class="o">=</span><span class="p">{</span><span class="s">' Authorization'</span><span class="p">:</span><span class="s">'12000:fq/LZ0n8YxOp0tC3NLaj6GbPFE8='</span><span class="p">,</span>
        <span class="s">'SMSSupport:Y'</span> <span class="p">,</span>
        <span class="s">'MessageID'</span><span class="p">:</span><span class="s">'74e46da2-41ff-8bba-f529-930acbffdb4c'</span><span class="p">,</span>
        <span class="s">'MessageTimestamp'</span><span class="p">:</span><span class="s">'20161029113022'</span><span class="p">}</span>

<span class="n">body</span> <span class="o">=</span> <span class="s">'{"transactionId" : "123647",</span><span class="err">
</span><span class="s">        "reference" : "4526",</span><span class="err">
</span><span class="s">        "operator" : "Mobile_provider",</span><span class="err">
</span><span class="s">        "subscriber" : "250786474859",</span><span class="err">
</span><span class="s">        "countryCode" : "RW",</span><span class="err">
</span><span class="s">        "currency" : "RWF",</span><span class="err">
</span><span class="s">        "transaction_type": "PayBill"</span><span class="err">
</span><span class="s">        "first_name": "Jhon",</span><span class="err">
</span><span class="s">        "account_number":"45678",</span><span class="err">
</span><span class="s">        "last_name": "Doe",</span><span class="err">
</span><span class="s">        "amount" : 200.0 }'</span>

<span class="n">post</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span> <span class="n">header</span><span class="p">,</span> <span class="n">body</span><span class="o">=</span> <span class="n">body</span><span class="p">)</span>

</code></pre>
<table><thead>
<tr>
<th>Fields</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transactionId <br><font color="DarkGray"><em>string</em></font><br><font color="Red">required</font></td>
<td>Unique identifier of the payment as generated by the MMO</td>
</tr>
<tr>
<td>subscriber <br><font color="DarkGray"><em>string</em></font><br><font color="Red">required</font></td>
<td>Unique identifier of the end customer in the MMO’s system. This is usually the MSISDN</td>
</tr>
<tr>
<td>reference <br><font color="DarkGray"><em>string</em></font><br><font color="Red">required</font></td>
<td>The reference number as assigned to the transaction by the mobile money provider</td>
</tr>
<tr>
<td>first_name <br><font color="DarkGray"><em>string</em></font><br><font color="Red">required</font></td>
<td>The first name of the subscriber</td>
</tr>
<tr>
<td>last_name <br><font color="DarkGray"><em>string</em></font><br><font color="Red">required</font></td>
<td>The last name of the subscriber</td>
</tr>
<tr>
<td>amount <br><font color="DarkGray"><em>int</em></font><br><font color="Red">required</font></td>
<td>The amount to be paid in local currency</td>
</tr>
<tr>
<td>currency <br><font color="DarkGray"><em>string</em></font><br><font color="Red">required</font></td>
<td>The local currency reference</td>
</tr>
<tr>
<td>amountTargetValue <br><font color="DarkGray"><em>int</em></font></td>
<td>Contains the amount to be paid in target currency</td>
</tr>
<tr>
<td>amountTargetCurrency <br><font color="DarkGray"><em>int</em></font></td>
<td>Contains the target currency reference</td>
</tr>
<tr>
<td>exchangeRate <br><font color="DarkGray"><em>int</em></font></td>
<td>Exchange rate between both currencies (if applicable)</td>
</tr>
</tbody></table>
<h3 id='response-payload-4'>Response Payload</h3>
<p>Upon the successful processing of the POST request, a JSON encoded response will be return in the following format:</p>
<pre class="highlight plaintext"><code>
 #### Version 1
{
  "status": "ACCEPTED",
  "first_name": "James",
  "last_name": "Bond",
  "amountTargetCurrency": 0,
  "reference": "17",
  "providerTransactionId": 1642621,
  "exchangeRate": 0,
  "subscriber": "76299583",
  "currency": "CFA",
  "amount": 7500,
  "transactionId": "12341",
  "smsMessage": "Dear Customer the payment was accepted.",
  "amountTargetValue": 0
}

#### Version 2
{
  "result": "PAYMENT_ACCEPTED"
}


</code></pre><h4 id='version-1-2'>Version 1</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>status <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The status of the payment: ACCEPTED</td>
</tr>
<tr>
<td>first_name <br><font color="DarkGray"><em>String</em></font><br></td>
<td>First name of the person who made the payment</td>
</tr>
<tr>
<td>last_name <br><font color="DarkGray"><em>String</em></font><br></td>
<td>Last name of the person who made the payment</td>
</tr>
<tr>
<td>reference <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The unique reference of the payment</td>
</tr>
<tr>
<td>countryCode <br><font color="DarkGray"><em>String</em></font><br></td>
<td>Country code in format (ISO 3166-1 alpha-2)</td>
</tr>
<tr>
<td>providerTransactionId <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The  provider’s reference ID of the payment</td>
</tr>
<tr>
<td>exchangeRate <br><font color="DarkGray"><em>Float</em></font><br></td>
<td>The exchange rate sent in the payment</td>
</tr>
<tr>
<td>subscriber <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The subscriber</td>
</tr>
<tr>
<td>currency <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The 3 letter currency code used in the payment</td>
</tr>
<tr>
<td>amount <br><font color="DarkGray"><em>Float</em></font><br></td>
<td>The amount of the payment</td>
</tr>
<tr>
<td>transactionId <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The transaction id of the payment</td>
</tr>
<tr>
<td>smsMessage <br><font color="DarkGray"><em>String</em></font><br></td>
<td>UNUSED field which can be use to send an SMS to the customer</td>
</tr>
<tr>
<td>amountTargetValue <br><font color="DarkGray"><em>Float</em></font><br></td>
<td>The amount of the payment after currency conversion</td>
</tr>
</tbody></table>
<h4 id='version-2-2'>Version 2</h4>
<table><thead>
<tr>
<th>Parameter</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>result <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The status of the payment. Should be: PAYMENT_ACCEPTED</td>
</tr>
</tbody></table>
<h2 id='get-payment'>[GET] Payment</h2><pre class="highlight shell tab-shell"><code>
curl -H <span class="s2">"Accept: application/json"</span> -H <span class="s2">"Content-Type: application/json"</span>
 -H <span class="s2">"Authorization:243858606953:9HkobKxzuAiK4j9bHbi80HDMG+Y="</span>
 -H <span class="s2">"SMSSupport:Y"</span>
 -H <span class="s2">"MessageID:74e46da-41ff-8bba-f529-930acbffdb4c"</span>,
 -H <span class="s2">"MessageTimestamp:20161029113022"</span>
https://payments-test.bboxx.co.uk/pulseapi/mm/1.0/payments/payment/343755867/customers/243858606953/payments

</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">url</span> <span class="o">=</span>  <span class="s">'https://payments-test.bboxx.co.uk/pulseapi/mm/1.0/payments/payment/200/customers/12000/payments'</span>

<span class="n">Headers</span><span class="o">=</span><span class="p">{</span><span class="s">' Authorization'</span><span class="p">:</span><span class="s">'12000:fq/LZ0n8YxOp0tC3NLaj6GbPFE8='</span><span class="p">,</span> <span class="s">'SMSSupport:Y'</span> <span class="p">,</span>
          <span class="s">'MessageID'</span><span class="p">:</span><span class="s">'74e46da2-41ff-8bba-f529-930acbffdb4c'</span><span class="p">,</span><span class="s">'MessageTimestamp'</span><span class="p">:</span><span class="s">'20161029113022'</span><span class="p">}</span>

<span class="n">post</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="n">header</span><span class="p">)</span>
</code></pre><h3 id='description-5'>Description</h3>
<p>The GET request will bring you the content of a historical transaction</p>

<p>The GET request will be sent to the following URL:
https://payments-test.bboxx.co.uk/pulseapi/1.0/payments/payment/{providerId}/customers/{customerId}/transaction/{transactionId}/payments</p>
<h3 id='headers-5'>Headers</h3><pre class="highlight plaintext"><code>Content-Type:application/json
Authorization:12345:XXXXXXXXXXXX=
MessageID:XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
MessageTimestamp:yyyyMMddHHmmss
</code></pre>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>Content-Type</td>
<td>If a request payload is sent, it should always be a JSON string</td>
</tr>
<tr>
<td>Authorization</td>
<td>The customerId combined with the signature. (See Authentication section)</td>
</tr>
<tr>
<td>MessageID</td>
<td>A globaly unique identifier for every request. Generate using UUID4 to ensure uniqueness</td>
</tr>
<tr>
<td>MessageTimestamp</td>
<td>The timestamp of the payment in UTC timezone with the yyyyMMddHHmmss format</td>
</tr>
</tbody></table>
<h3 id='url-parameters-5'>URL Parameters</h3>
<table><thead>
<tr>
<th>Name</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>providerId</td>
<td>If a request payload is sent, it should always be a JSON string</td>
</tr>
<tr>
<td>customerId</td>
<td>Hash to authentication the requesting system</td>
</tr>
<tr>
<td>transactionId</td>
<td>The unique reference for the payment that should be retreieved</td>
</tr>
</tbody></table>
<h3 id='response-payload-5'>Response Payload</h3>
<p>Upon the successful processing of the POST request, a JSON encoded response will be return in the following format:</p>
<pre class="highlight plaintext"><code>
 {
  "status": "RECEIVED",
  "transactionId": "ryAJfphyxTd1bIqR3bT0",
  "transactionTimestamp": "2016-11-02T14:59:23Z"
}


</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>status <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The status of the payment</td>
</tr>
<tr>
<td>transactionId <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The unique reference for the payment</td>
</tr>
<tr>
<td>transactionTimestamp <br><font color="DarkGray"><em>String</em></font><br></td>
<td>The datetime of the payment in UTC ISO format.</td>
</tr>
</tbody></table>
<h2 id='errors-code'>Errors code</h2>
<p>The Bboxx Mobile Money API uses the following error codes:</p>

<table><thead>
<tr>
<th>Code Error</th>
<th>description</th>
<th>Exemple</th>
</tr>
</thead><tbody>
<tr>
<td>4000</td>
<td>Provider information wrong</td>
<td>your application is not register in the system please check your account.</td>
</tr>
<tr>
<td>4001</td>
<td>Customer not found</td>
<td>The provided CustomerID was not found in the system.</td>
</tr>
<tr>
<td>4002</td>
<td>The description message</td>
<td>Transaction cannot be completed as multiple customers have been found for the provided customerID.</td>
</tr>
<tr>
<td>4003</td>
<td>Invalid amount</td>
<td>Unable to validate this transaction as the amount specified is not valid e.g: zero negative or invalid format amount.</td>
</tr>
<tr>
<td>4004</td>
<td>Forbidden operation</td>
<td>The customer identified by the customerId is not allowed to perform this operation.</td>
</tr>
<tr>
<td>4005</td>
<td>Invalid Reference</td>
<td>The reference provided in the message is invalid. i.e: The reference is unknown.</td>
</tr>
<tr>
<td>4006</td>
<td>Provider information wrong</td>
<td>The provided currency is not valid.</td>
</tr>
<tr>
<td>4007</td>
<td>Operation not succeed</td>
<td>Invalid message format.</td>
</tr>
<tr>
<td>4008</td>
<td>Field value length too large</td>
<td>Field value exceeded the maximum length allowed.</td>
</tr>
<tr>
<td>4009</td>
<td>Transaction ID not found</td>
<td>The transaction ID provided was not found.</td>
</tr>
<tr>
<td>40010</td>
<td>Duplicate Transaction ID</td>
<td>The Customer for provided customerID was not found in system.</td>
</tr>
</tbody></table>
<h1 id='bboxx-soap-api'>BBOXX SOAP API</h1><h2 id='introduction-2'>Introduction</h2>
<p>The BBOXX SOAP API is based on open standards known collectively as web services, which include the Simple Object Access Protocol (SOAP), Web Services Definition Language (WSDL), and the XML Schema Definition language (XSD). A wide range of development tools on a variety of platforms support web services.</p>

<p>Like many web services, BBOXX SOAP API is a combination of client-side and server-side schemas.</p>
<h2 id='authentication-2'>Authentication</h2>
<p>When you call BBOXX SOAP API, you must authenticate each request by using a username and password provided using &quot;BASIC Authentication&quot;.</p>
<h3 id='how-basic-authentication-works'>How Basic Authentication Works</h3><pre class="highlight shell tab-shell"><code>
 curl -H <span class="s2">"Content-Type: text/xml"</span> -u MobileProvider:3drvJjs9#324Qfa
 -X POST -d @Payment.xml -i  https://payments-test.bboxx.co.uk/pulseapi/mm/XMLPay


</code></pre>
<p>In basic authentication, the client requests a URL that requires authentication. The server requests the client (or user agent) to authenticate itself by sending a <strong>401-Not Authorized</strong> code. The client, in return, sends back the same request but with login credentials as a base64 encoded string in the format <code>username:password</code>. This string is sent in the <code>Authorization</code> header field as the following:</p>

<p><code>Authorization: Basic {base64_encode(username:password)}</code></p>

<p>So if the username is tutsplus and the password is 123456, the following header field would be sent with the request:</p>

<p><code>Authorization: Basic dHV0c3BsdXM6MTIzNDU2</code></p>

<p>Since the base64 encoded string can easily be decoded, this method is highly insecure to be used on an open network. Hence this method should only be used for debugging and development purposes when the connection between the server and the client is trusted.</p>
<h2 id='request'>Request</h2><h4 id='description-6'>Description</h4>
<p>This endpoint allows for a payment to be created.</p>

<p>The POST request will be sent to the following URL:
https://payments-test.bboxx.co.uk/pulseapi/mm/XMLPay</p>
<h4 id='request-payload-3'>Request Payload</h4>
<p>Following table provides information of each XMl fields:</p>
<pre class="highlight xml tab-xml"><code>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;SOAP-ENV:Envelope</span> <span class="na">xmlns:SOAP-ENV=</span><span class="s">"http://schemas.xmlsoap.org/soap/envelope/"</span><span class="nt">&gt;</span>
<span class="nt">&lt;SOAP-ENV:header&gt;</span>
<span class="nt">&lt;/SOAP-ENV:header&gt;</span>
    <span class="nt">&lt;SOAP-ENV:Body&gt;</span>
        <span class="nt">&lt;ns1</span> <span class="err">paymentDone</span><span class="nt">&gt;</span>
        <span class="nt">&lt;countryCode&gt;</span>TG<span class="nt">&lt;/countryCode&gt;</span>
        <span class="nt">&lt;transactionId&gt;</span>123647<span class="nt">&lt;/transactionId&gt;</span>
        <span class="nt">&lt;reference&gt;</span>4526<span class="nt">&lt;/reference&gt;</span>
        <span class="nt">&lt;operator&gt;</span>BBOXX Telecom<span class="nt">&lt;/operator&gt;</span>
        <span class="nt">&lt;subscriber&gt;</span>250786474859<span class="nt">&lt;/subscriber&gt;</span>
        <span class="nt">&lt;transaction_type&gt;</span>PayBill<span class="nt">&lt;/transaction_type&gt;</span>
        <span class="nt">&lt;first_name&gt;</span>Jhon<span class="nt">&lt;/first_name&gt;</span>
        <span class="nt">&lt;account_number&gt;</span>45678<span class="nt">&lt;/account_number&gt;</span>
        <span class="nt">&lt;last_name&gt;</span>Doe<span class="nt">&lt;/last_name&gt;</span>
        <span class="nt">&lt;amount&gt;</span>10000.00<span class="nt">&lt;/amount&gt;</span>
        <span class="nt">&lt;currency&gt;</span>CFA <span class="nt">&lt;/currency&gt;</span>
        <span class="nt">&lt;amountTargetValue&gt;</span>18.60 <span class="nt">&lt;/amountTargetValue&gt;</span>
        <span class="nt">&lt;amountTargetCurrency&gt;</span>USD<span class="nt">&lt;/amountTargetCurrency&gt;</span>
        <span class="nt">&lt;exchangeRate&gt;</span>0.0019<span class="nt">&lt;/exchangeRate&gt;</span>
        <span class="nt">&lt;freeField&gt;</span>JOE<span class="nt">&lt;/freeField&gt;</span>
        <span class="err">&lt;</span>/ns1 paymentDone&gt;
    <span class="nt">&lt;/SOAP-ENV:Body&gt;</span>
<span class="nt">&lt;/SOAP-ENV:Envelope&gt;</span>


<span class="nt">&lt;/xml&gt;</span>

</code></pre>
<table><thead>
<tr>
<th>Fields</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>transactionId <br><font color="DarkGray"></font></td>
<td>Unique identifier of the payment as generated by the MMO</td>
</tr>
<tr>
<td>operator<br><font color="DarkGray"></font></td>
<td>Unique identifier of the MMO</td>
</tr>
<tr>
<td>subscriber <br><font color="DarkGray"></font></td>
<td>Unique identifier of the end customer in the MMO’s system. This is usually the MSISDN</td>
</tr>
<tr>
<td>reference <br><font color="DarkGray"></font></td>
<td>The reference number as assigned to the transaction by the mobile money provider</td>
</tr>
<tr>
<td>internal_transaction_id<br><font color="DarkGray"></font></td>
<td>The internal ID of the transaction within the System.</td>
</tr>
<tr>
<td>transaction_type <br><font color="DarkGray"></font></td>
<td>The type of the transaction eg. Paybill, Buygoods etc,</td>
</tr>
<tr>
<td>account_number <br><font color="DarkGray"></font></td>
<td>The account number as entered by the subscriber. (optional – only for Paybill payments)</td>
</tr>
<tr>
<td>first_name <br><font color="DarkGray"></font></td>
<td>The first name of the subscriber</td>
</tr>
<tr>
<td>last_name <br><font color="DarkGray"></font></td>
<td>The last name of the subscriber</td>
</tr>
<tr>
<td>amount <br><font color="DarkGray"></font></td>
<td>The amount to be paid in local currency</td>
</tr>
<tr>
<td>amountTargetValue <br><font color="DarkGray"></font></td>
<td>Contains the amount to be paid in target currency</td>
</tr>
<tr>
<td>amountTargetCurrency <br><font color="DarkGray"></font></td>
<td>Contains the target currency reference</td>
</tr>
<tr>
<td>exchangeRate <br><font color="DarkGray"></font></td>
<td>Exchange rate between both currencies (if applicable)</td>
</tr>
<tr>
<td>currency <br><font color="DarkGray"></font></td>
<td>The local currency reference</td>
</tr>
<tr>
<td>status <br><font color="DarkGray"></font></td>
<td>Status of the request : Accepted</td>
</tr>
</tbody></table>
<h3 id='response-payload-6'>Response Payload</h3>
<p>Upon the successful processing of the POST request, a XML response will be return :</p>
<pre class="highlight xml tab-xml"><code>
<span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
  <span class="nt">&lt;SOAP-ENV:Envelope</span> <span class="na">xmlns:SOAP-ENV=</span><span class="s">"http://schemas.xmlsoap.org/soap/envelope/"</span> <span class="nt">&gt;</span>
    <span class="nt">&lt;SOAP-ENV:Body&gt;</span>
      <span class="nt">&lt;ns1:paymentDoneResponse&gt;</span>
      <span class="nt">&lt;date&gt;</span> 2017-02-28 16:30:46.023428<span class="nt">&lt;/date&gt;</span>
      <span class="nt">&lt;code&gt;</span>200<span class="nt">&lt;/code&gt;</span>
      <span class="nt">&lt;description&gt;</span>  Success <span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/ns1:paymentDoneResponse&gt;</span>
    <span class="nt">&lt;/SOAP-ENV:Body&gt;</span>
  <span class="nt">&lt;/SOAP-ENV:Envelope&gt;</span>

<span class="nt">&lt;/xml&gt;</span>

</code></pre>
<table><thead>
<tr>
<th>Parameter</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>date</td>
<td>The transaction timestamp</td>
</tr>
<tr>
<td>code</td>
<td>The payment status code</td>
</tr>
<tr>
<td>description</td>
<td>The description message</td>
</tr>
</tbody></table>
<h2 id='errors-code-2'>Errors code</h2>
<p>The Bboxx Mobile Money API uses the following error codes:</p>

<table><thead>
<tr>
<th>Code Error</th>
<th>description</th>
<th>Exemple</th>
</tr>
</thead><tbody>
<tr>
<td>4000</td>
<td>Provider information wrong</td>
<td>your application is not register in the system please check your account.</td>
</tr>
<tr>
<td>4001</td>
<td>Customer not found</td>
<td>The provided CustomerID was not found in the system.</td>
</tr>
<tr>
<td>4002</td>
<td>The description message</td>
<td>Transaction cannot be completed as multiple customers have been found for the provided customerID.</td>
</tr>
<tr>
<td>4003</td>
<td>Invalid amount</td>
<td>Unable to validate this transaction as the amount specified is not valid e.g: zero negative or invalid format amount.</td>
</tr>
<tr>
<td>4004</td>
<td>Forbidden operation</td>
<td>The customer identified by the customerId is not allowed to perform this operation.</td>
</tr>
<tr>
<td>4005</td>
<td>Invalid Reference</td>
<td>The reference provided in the message is invalid. i.e: The reference is unknown.</td>
</tr>
<tr>
<td>4006</td>
<td>Provider information wrong</td>
<td>The provided currency is not valid.</td>
</tr>
<tr>
<td>4007</td>
<td>Operation not succeed</td>
<td>Invalid message format.</td>
</tr>
<tr>
<td>4008</td>
<td>Field value length too large</td>
<td>Field value exceeded the maximum length allowed.</td>
</tr>
<tr>
<td>4009</td>
<td>Transaction ID not found</td>
<td>The transaction ID provided was not found.</td>
</tr>
<tr>
<td>40010</td>
<td>Duplicate Transaction ID</td>
<td>The Customer for provided customerID was not found in system.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="java">java</a>
          </div>
      </div>
    </div>
  </body>
</html>
